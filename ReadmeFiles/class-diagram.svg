<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="851px" preserveAspectRatio="none" style="width:1350px;height:851px;" version="1.1" viewBox="0 0 1350 851" width="1350px" zoomAndPan="magnify"><defs><filter height="300%" id="f1xahgr73zdebe" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="247" x="553.5" y="16.708">Class Relationships Diagram</text><!--MD5=[b7797f055170cff5e77450dc6b350301]
cluster com.microsoft.azure.msalwebsample--><polygon fill="#FFFFFF" filter="url(#f1xahgr73zdebe)" points="14,36.9531,314,36.9531,321,59.25,543,59.25,543,839.9531,14,839.9531,14,36.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="321" y1="59.25" y2="59.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="294" x="18" y="51.9482">com.microsoft.azure.msalwebsample</text><!--MD5=[c3f8f7568370e622fed58bcca9b68480]
cluster com.microsoft.aad.msal4j--><polygon fill="#FFFFFF" filter="url(#f1xahgr73zdebe)" points="562,266.4531,769,266.4531,776,288.75,1328,288.75,1328,636.4531,562,636.4531,562,266.4531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="562" x2="776" y1="288.75" y2="288.75"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201" x="566" y="281.4482">com.microsoft.aad.msal4j</text><!--MD5=[c6cf857a4f44e20477bcfd35d1c7487d]
class AuthFilter--><rect fill="#FEFECE" filter="url(#f1xahgr73zdebe)" height="124.8281" id="AuthFilter" style="stroke: #A80036; stroke-width: 1.5;" width="240" x="152" y="63.9531"/><ellipse cx="237.75" cy="79.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M240.7188,85.5938 Q240.1406,85.8906 239.5,86.0391 Q238.8594,86.1875 238.1563,86.1875 Q235.6563,86.1875 234.3359,84.5391 Q233.0156,82.8906 233.0156,79.7656 Q233.0156,76.6406 234.3359,74.9844 Q235.6563,73.3281 238.1563,73.3281 Q238.8594,73.3281 239.5078,73.4844 Q240.1563,73.6406 240.7188,73.9375 L240.7188,76.6563 Q240.0938,76.0781 239.5,75.8047 Q238.9063,75.5313 238.2813,75.5313 Q236.9375,75.5313 236.25,76.6016 Q235.5625,77.6719 235.5625,79.7656 Q235.5625,81.8594 236.25,82.9297 Q236.9375,84 238.2813,84 Q238.9063,84 239.5,83.7266 Q240.0938,83.4531 240.7188,82.875 L240.7188,85.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="258.25" y="84.1074">AuthFilter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="153" x2="391" y1="95.9531" y2="95.9531"/><polygon fill="none" points="163,102.9531,159,108.9531,167,108.9531" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="172" y="110.1636">AuthHelper authHelper</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="153" x2="391" y1="116.7578" y2="116.7578"/><ellipse cx="163" cy="127.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="172" y="130.9683">void doFilter()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="160" y="137.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="214" x="172" y="143.7729">boolean containsAuthenticationCode()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="160" y="150.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="183" x="172" y="156.5776">boolean isAccessTokenExpired()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="160" y="163.1719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="172" y="169.3823">boolean isAuthenticated()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="160" y="175.9766"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="214" x="172" y="182.187">void updateAuthDataUsingSilentFlow()</text><!--MD5=[eeb78bd40544f889e38994a490a8ac7b]
class AuthHelper--><rect fill="#FEFECE" filter="url(#f1xahgr73zdebe)" height="214.4609" id="AuthHelper" style="stroke: #A80036; stroke-width: 1.5;" width="327" x="208.5" y="248.9531"/><ellipse cx="332.75" cy="264.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M335.7188,270.5938 Q335.1406,270.8906 334.5,271.0391 Q333.8594,271.1875 333.1563,271.1875 Q330.6563,271.1875 329.3359,269.5391 Q328.0156,267.8906 328.0156,264.7656 Q328.0156,261.6406 329.3359,259.9844 Q330.6563,258.3281 333.1563,258.3281 Q333.8594,258.3281 334.5078,258.4844 Q335.1563,258.6406 335.7188,258.9375 L335.7188,261.6563 Q335.0938,261.0781 334.5,260.8047 Q333.9063,260.5313 333.2813,260.5313 Q331.9375,260.5313 331.25,261.6016 Q330.5625,262.6719 330.5625,264.7656 Q330.5625,266.8594 331.25,267.9297 Q331.9375,269 333.2813,269 Q333.9063,269 334.5,268.7266 Q335.0938,268.4531 335.7188,267.875 L335.7188,270.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="353.25" y="269.1074">AuthHelper</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="209.5" x2="534.5" y1="280.9531" y2="280.9531"/><polygon fill="none" points="219.5,287.9531,215.5,293.9531,223.5,293.9531" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="185" x="228.5" y="295.1636">static PRINCIPAL_SESSION_NAME</text><polygon fill="none" points="219.5,300.7578,215.5,306.7578,223.5,306.7578" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="241" x="228.5" y="307.9683">static TOKEN_CACHE_SESSION_ATTRIBUTE</text><polygon fill="none" points="219.5,313.5625,215.5,319.5625,223.5,319.5625" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="185" x="228.5" y="320.7729">BasicConfiguration configuration</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="209.5" x2="534.5" y1="327.3672" y2="327.3672"/><ellipse cx="219.5" cy="338.3672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="236" x="228.5" y="341.5776">void processAuthenticationCodeRedirect()</text><ellipse cx="219.5" cy="351.1719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="279" x="228.5" y="354.3823">IAuthenticationResult getAuthResultBySilentFlow()</text><ellipse cx="219.5" cy="363.9766" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="114" x="228.5" y="367.187">void validateNonce()</text><ellipse cx="219.5" cy="376.7813" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="235" x="228.5" y="379.9917">String getNonceClaimValueFromIdToken()</text><ellipse cx="219.5" cy="389.5859" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="258" x="228.5" y="392.7964">void validateAuthRespMatchesAuthCodeFlow()</text><ellipse cx="219.5" cy="402.3906" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="228.5" y="405.6011">void sendAuthRedirect()</text><ellipse cx="219.5" cy="415.1953" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="182" x="228.5" y="418.4058">String getAuthorizationCodeUrl()</text><polygon fill="#4177AF" points="219.5,424,215.5,430,223.5,430" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="276" x="228.5" y="431.2104">IAuthenticationResult getAuthResultByAuthCode()</text><polygon fill="#4177AF" points="219.5,436.8047,215.5,442.8047,223.5,442.8047" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="301" x="228.5" y="444.0151">ConfidentialClientApplication createClientApplication()</text><polygon fill="#4177AF" points="219.5,449.6094,215.5,455.6094,223.5,455.6094" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="209" x="228.5" y="456.8198">boolean isAuthenticationSuccessful()</text><!--MD5=[736dcffd013589763a7235f1c8c08fa4]
class SessionManagementHelper--><rect fill="#FEFECE" filter="url(#f1xahgr73zdebe)" height="150.4375" id="SessionManagementHelper" style="stroke: #A80036; stroke-width: 1.5;" width="281" x="22.5" y="522.9531"/><ellipse cx="72.75" cy="538.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M75.7188,544.5938 Q75.1406,544.8906 74.5,545.0391 Q73.8594,545.1875 73.1563,545.1875 Q70.6563,545.1875 69.3359,543.5391 Q68.0156,541.8906 68.0156,538.7656 Q68.0156,535.6406 69.3359,533.9844 Q70.6563,532.3281 73.1563,532.3281 Q73.8594,532.3281 74.5078,532.4844 Q75.1563,532.6406 75.7188,532.9375 L75.7188,535.6563 Q75.0938,535.0781 74.5,534.8047 Q73.9063,534.5313 73.2813,534.5313 Q71.9375,534.5313 71.25,535.6016 Q70.5625,536.6719 70.5625,538.7656 Q70.5625,540.8594 71.25,541.9297 Q71.9375,543 73.2813,543 Q73.9063,543 74.5,542.7266 Q75.0938,542.4531 75.7188,541.875 L75.7188,544.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="172" x="93.25" y="543.1074">SessionManagementHelper</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="302.5" y1="554.9531" y2="554.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="302.5" y1="562.9531" y2="562.9531"/><ellipse cx="33.5" cy="573.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="42.5" y="577.1636">StateData validateState()</text><ellipse cx="33.5" cy="586.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="216" x="42.5" y="589.9683">StateData removeStateFromSession()</text><polygon fill="#4177AF" points="33.5,595.5625,29.5,601.5625,37.5,601.5625" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="42.5" y="602.7729">void eliminateExpiredStates()</text><polygon fill="#4177AF" points="33.5,608.3672,29.5,614.3672,37.5,614.3672" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="207" x="42.5" y="615.5776">void storeStateAndNonceInSession()</text><polygon fill="#4177AF" points="33.5,621.1719,29.5,627.1719,37.5,627.1719" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190" x="42.5" y="628.3823">void storeTokenCacheInSession()</text><polygon fill="#4177AF" points="33.5,633.9766,29.5,639.9766,37.5,639.9766" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="42.5" y="641.187">void setSessionPrincipal()</text><polygon fill="#4177AF" points="33.5,646.7813,29.5,652.7813,37.5,652.7813" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="42.5" y="653.9917">void removePrincipalFromSession()</text><polygon fill="#4177AF" points="33.5,659.5859,29.5,665.5859,37.5,665.5859" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="255" x="42.5" y="666.7964">IAuthenticationResult getAuthSessionObject()</text><!--MD5=[c9a05d0da38edbf03e6eeb84dd8c207d]
class StateData--><rect fill="#FEFECE" filter="url(#f1xahgr73zdebe)" height="99.2188" id="StateData" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="81" y="732.9531"/><ellipse cx="126.75" cy="748.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M129.7188,754.5938 Q129.1406,754.8906 128.5,755.0391 Q127.8594,755.1875 127.1563,755.1875 Q124.6563,755.1875 123.3359,753.5391 Q122.0156,751.8906 122.0156,748.7656 Q122.0156,745.6406 123.3359,743.9844 Q124.6563,742.3281 127.1563,742.3281 Q127.8594,742.3281 128.5078,742.4844 Q129.1563,742.6406 129.7188,742.9375 L129.7188,745.6563 Q129.0938,745.0781 128.5,744.8047 Q127.9063,744.5313 127.2813,744.5313 Q125.9375,744.5313 125.25,745.6016 Q124.5625,746.6719 124.5625,748.7656 Q124.5625,750.8594 125.25,751.9297 Q125.9375,753 127.2813,753 Q127.9063,753 128.5,752.7266 Q129.0938,752.4531 129.7188,751.875 L129.7188,754.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="64" x="147.25" y="753.1074">StateData</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="82" x2="244" y1="764.9531" y2="764.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="89" y="772.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="101" y="779.1636">String nonce</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="89" y="785.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="101" y="791.9683">Date expirationDate</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="82" x2="244" y1="798.5625" y2="798.5625"/><ellipse cx="92" cy="809.5625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="101" y="812.7729">String getNonce()</text><ellipse cx="92" cy="822.3672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="101" y="825.5776">Date getExpirationDate()</text><!--MD5=[5f0924d2b423221a318e837ac0a59488]
class BasicConfiguration--><rect fill="#FEFECE" filter="url(#f1xahgr73zdebe)" height="124.8281" id="BasicConfiguration" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="339" y="535.4531"/><ellipse cx="375.15" cy="551.4531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M378.1188,557.0938 Q377.5406,557.3906 376.9,557.5391 Q376.2594,557.6875 375.5563,557.6875 Q373.0563,557.6875 371.7359,556.0391 Q370.4156,554.3906 370.4156,551.2656 Q370.4156,548.1406 371.7359,546.4844 Q373.0563,544.8281 375.5563,544.8281 Q376.2594,544.8281 376.9078,544.9844 Q377.5563,545.1406 378.1188,545.4375 L378.1188,548.1563 Q377.4938,547.5781 376.9,547.3047 Q376.3063,547.0313 375.6813,547.0313 Q374.3375,547.0313 373.65,548.1016 Q372.9625,549.1719 372.9625,551.2656 Q372.9625,553.3594 373.65,554.4297 Q374.3375,555.5 375.6813,555.5 Q376.3063,555.5 376.9,555.2266 Q377.4938,554.9531 378.1188,554.375 L378.1188,557.0938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="117" x="393.85" y="555.6074">BasicConfiguration</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="534" y1="567.4531" y2="567.4531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="347" y="575.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="359" y="581.6636">String clientId;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="347" y="588.2578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="359" y="594.4683">String authority;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="347" y="601.0625"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="359" y="607.2729">String redirectUriSignin;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="347" y="613.8672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="359" y="620.0776">String redirectUriGraph;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="347" y="626.6719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="98" x="359" y="632.8823">String secretKey;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="347" y="639.4766"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="170" x="359" y="645.687">String msGraphEndpointHost;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="534" y1="652.2813" y2="652.2813"/><!--MD5=[d833806e7389e97f2fa8cdb0f770d014]
class IAuthenticationResult--><rect fill="#FEFECE" filter="url(#f1xahgr73zdebe)" height="124.8281" id="IAuthenticationResult" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="646" y="293.4531"/><ellipse cx="661" cy="309.4531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M656.9219,305.2188 L656.9219,303.0625 L664.3125,303.0625 L664.3125,305.2188 L661.8438,305.2188 L661.8438,313.2969 L664.3125,313.2969 L664.3125,315.4531 L656.9219,315.4531 L656.9219,313.2969 L659.3906,313.2969 L659.3906,305.2188 L656.9219,305.2188 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="134" x="675" y="313.6074">IAuthenticationResult</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="647" x2="811" y1="325.4531" y2="325.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="647" x2="811" y1="333.4531" y2="333.4531"/><polygon fill="#4177AF" points="657,340.4531,653,346.4531,661,346.4531" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="666" y="347.6636">String accessToken()</text><polygon fill="#4177AF" points="657,353.2578,653,359.2578,661,359.2578" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="666" y="360.4683">String idToken()</text><polygon fill="#4177AF" points="657,366.0625,653,372.0625,661,372.0625" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="666" y="373.2729">IAccount account()</text><polygon fill="#4177AF" points="657,378.8672,653,384.8672,661,384.8672" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="666" y="386.0776">String environment()</text><polygon fill="#4177AF" points="657,391.6719,653,397.6719,661,397.6719" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="666" y="398.8823">String scopes()</text><polygon fill="#4177AF" points="657,404.4766,653,410.4766,661,410.4766" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="666" y="411.687">Date expiresOnDate()</text><!--MD5=[4d8245663b1cef95060b09499a442816]
class AbstractClientApplicationBase--><rect fill="#FEFECE" filter="url(#f1xahgr73zdebe)" height="86.4141" id="AbstractClientApplicationBase" style="stroke: #A80036; stroke-width: 1.5;" width="398" x="884" y="312.9531"/><ellipse cx="984.75" cy="328.9531" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M984.8594,324.2969 L983.7031,329.375 L986.0313,329.375 L984.8594,324.2969 Z M983.375,322.0625 L986.3594,322.0625 L989.7188,334.4531 L987.2656,334.4531 L986.5,331.3906 L983.2188,331.3906 L982.4688,334.4531 L980.0313,334.4531 L983.375,322.0625 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="1005.25" y="333.1074">AbstractClientApplicationBase</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="885" x2="1281" y1="344.9531" y2="344.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="885" x2="1281" y1="352.9531" y2="352.9531"/><ellipse cx="895" cy="363.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="186" x="904" y="367.1636">URL getAuthorizationRequestUrl()</text><ellipse cx="895" cy="376.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="331" x="904" y="379.9683">CompletableFuture&lt;IAuthenticationResult&gt; acquireToken()</text><ellipse cx="895" cy="389.5625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="372" x="904" y="392.7729">CompletableFuture&lt;IAuthenticationResult&gt; acquireTokenSilently()</text><!--MD5=[29555711bc5eb3a0e47a0a377843191b]
class ConfidentialClientApplication--><rect fill="#FEFECE" filter="url(#f1xahgr73zdebe)" height="60.8047" id="ConfidentialClientApplication" style="stroke: #A80036; stroke-width: 1.5;" width="357" x="570.5" y="567.4531"/><ellipse cx="655.75" cy="583.4531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M658.7188,589.0938 Q658.1406,589.3906 657.5,589.5391 Q656.8594,589.6875 656.1563,589.6875 Q653.6563,589.6875 652.3359,588.0391 Q651.0156,586.3906 651.0156,583.2656 Q651.0156,580.1406 652.3359,578.4844 Q653.6563,576.8281 656.1563,576.8281 Q656.8594,576.8281 657.5078,576.9844 Q658.1563,577.1406 658.7188,577.4375 L658.7188,580.1563 Q658.0938,579.5781 657.5,579.3047 Q656.9063,579.0313 656.2813,579.0313 Q654.9375,579.0313 654.25,580.1016 Q653.5625,581.1719 653.5625,583.2656 Q653.5625,585.3594 654.25,586.4297 Q654.9375,587.5 656.2813,587.5 Q656.9063,587.5 657.5,587.2266 Q658.0938,586.9531 658.7188,586.375 L658.7188,589.0938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="178" x="676.25" y="587.6074">ConfidentialClientApplication</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="571.5" x2="926.5" y1="599.4531" y2="599.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="571.5" x2="926.5" y1="607.4531" y2="607.4531"/><ellipse cx="581.5" cy="618.4531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="331" x="590.5" y="621.6636">CompletableFuture&lt;IAuthenticationResult&gt; acquireToken()</text><!--MD5=[29ea245828113759c640a6a75b2bc34e]
class PublicClientApplication--><rect fill="#FEFECE" filter="url(#f1xahgr73zdebe)" height="60.8047" id="PublicClientApplication" style="stroke: #A80036; stroke-width: 1.5;" width="357" x="962.5" y="567.4531"/><ellipse cx="1066.25" cy="583.4531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1069.2188,589.0938 Q1068.6406,589.3906 1068,589.5391 Q1067.3594,589.6875 1066.6563,589.6875 Q1064.1563,589.6875 1062.8359,588.0391 Q1061.5156,586.3906 1061.5156,583.2656 Q1061.5156,580.1406 1062.8359,578.4844 Q1064.1563,576.8281 1066.6563,576.8281 Q1067.3594,576.8281 1068.0078,576.9844 Q1068.6563,577.1406 1069.2188,577.4375 L1069.2188,580.1563 Q1068.5938,579.5781 1068,579.3047 Q1067.4063,579.0313 1066.7813,579.0313 Q1065.4375,579.0313 1064.75,580.1016 Q1064.0625,581.1719 1064.0625,583.2656 Q1064.0625,585.3594 1064.75,586.4297 Q1065.4375,587.5 1066.7813,587.5 Q1067.4063,587.5 1068,587.2266 Q1068.5938,586.9531 1069.2188,586.375 L1069.2188,589.0938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="141" x="1086.75" y="587.6074">PublicClientApplication</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="963.5" x2="1318.5" y1="599.4531" y2="599.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="963.5" x2="1318.5" y1="607.4531" y2="607.4531"/><ellipse cx="973.5" cy="618.4531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="331" x="982.5" y="621.6636">CompletableFuture&lt;IAuthenticationResult&gt; acquireToken()</text><!--MD5=[aefd88b201f900f51eba046c715ca55f]
link AuthFilter to AuthHelper--><path d="M299.3254,189.165 C306.7356,206.1713 314.9888,225.1123 323.1988,243.9544 " fill="none" id="AuthFilter-&gt;AuthHelper" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="325.2846,248.7413,325.3565,238.8927,323.2873,244.1576,318.0225,242.0884,325.2846,248.7413" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f1e5271f95ef780d805ae53c303f491b]
link AuthFilter to SessionManagementHelper--><path d="M221.9514,189.0273 C209.7705,207.3588 198.1912,228.1043 191,248.9531 C160.5151,337.3359 156.5543,445.4968 158.2499,517.7655 " fill="none" id="AuthFilter-&gt;SessionManagementHelper" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="158.3815,522.9061,162.1498,513.8067,158.2535,517.9078,154.1524,514.0115,158.3815,522.9061" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[7613974746567c83834b8b9a566f28c9]
link AuthHelper to SessionManagementHelper--><path d="M279.4168,463.1546 C263.2768,481.8431 246.7525,500.9765 231.4113,518.7401 " fill="none" id="AuthHelper-&gt;SessionManagementHelper" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="227.9514,522.7462,236.8613,518.5493,231.2195,518.9621,230.8067,513.3203,227.9514,522.7462" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6fe96c5fd2729950f543712d31b32a2e]
link SessionManagementHelper to StateData--><path d="M163,672.9963 C163,691.2596 163,710.4557 163,727.5829 " fill="none" id="SessionManagementHelper-&gt;StateData" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="163,732.8285,167,723.8285,163,727.8285,159,723.8285,163,732.8285" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[964d2fbd48ee1fbe1c755c5e4939362a]
link AuthHelper to BasicConfiguration--><path d="M400.7938,463.1546 C407.4155,487.8079 414.2452,513.2354 420.164,535.2712 " fill="none" id="AuthHelper-BasicConfiguration" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[dde9c09639c139266e6a987ba54caaa6]
reverse link AbstractClientApplicationBase to PublicClientApplication--><path d="M1098.0895,418.9127 C1109.5316,466.6538 1124.7596,530.1915 1133.6598,567.3266 " fill="none" id="AbstractClientApplicationBase&lt;-PublicClientApplication" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1091.2235,420.2986,1093.3692,399.2179,1104.8379,417.0355,1091.2235,420.2986" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[38ad09ddc1ca8713c6ee98be0d91deea]
reverse link AbstractClientApplicationBase to ConfidentialClientApplication--><path d="M1006.9461,411.0581 C940.1377,459.4641 845.3887,528.1146 791.2696,567.3266 " fill="none" id="AbstractClientApplicationBase&lt;-ConfidentialClientApplication" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1002.9847,405.284,1023.2875,399.2179,1011.1989,416.621,1002.9847,405.284" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ac7a0872f0b83850a4373b906f656c9a]
link AuthHelper to ConfidentialClientApplication--><path d="M535.7129,461.042 C593.732,498.2851 654.9393,537.5746 696.831,564.4653 " fill="none" id="AuthHelper-&gt;ConfidentialClientApplication" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="701.0778,567.1914,695.6647,558.9635,696.8701,564.4904,691.3432,565.6958,701.0778,567.1914" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[5a10f32a4c57b441b2e92a64be1d0df0]
link AuthHelper to PublicClientApplication--><path d="M535.5696,455.8137 C541.7161,458.3789 547.8705,460.772 554,462.9531 C719.6373,521.8947 775.0459,477.9483 945,522.9531 C986.2906,533.8871 1030.8684,550.5357 1067.063,565.3718 " fill="none" id="AuthHelper-&gt;PublicClientApplication" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1071.8864,567.3585,1065.0881,560.2323,1067.2632,565.4542,1062.0413,567.6293,1071.8864,567.3585" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[41ac099f65dff4b61d3a887a2df86690]
@startuml
title Class Relationships Diagram

package com.microsoft.azure.msalwebsample {
  class AuthFilter {
    ~AuthHelper authHelper
    +void doFilter()
    -boolean containsAuthenticationCode()
    -boolean isAccessTokenExpired()
    -boolean isAuthenticated()
    -void updateAuthDataUsingSilentFlow()
    }

  class AuthHelper {
    ~static PRINCIPAL_SESSION_NAME
    ~static TOKEN_CACHE_SESSION_ATTRIBUTE
    ~BasicConfiguration configuration
    +void processAuthenticationCodeRedirect()
    +IAuthenticationResult getAuthResultBySilentFlow()
    +void validateNonce()
    +String getNonceClaimValueFromIdToken()
    +void validateAuthRespMatchesAuthCodeFlow()
    +void sendAuthRedirect()
    +String getAuthorizationCodeUrl()
    ~IAuthenticationResult getAuthResultByAuthCode()
    ~ConfidentialClientApplication createClientApplication()
    ~boolean isAuthenticationSuccessful()
    }
    
  class SessionManagementHelper {
    +StateData validateState()
    +StateData removeStateFromSession()
    ~void eliminateExpiredStates()
    ~void storeStateAndNonceInSession()
    ~void storeTokenCacheInSession()
    ~void setSessionPrincipal()
    ~void removePrincipalFromSession()
    ~IAuthenticationResult getAuthSessionObject()
    }

  class StateData {
    -String nonce
    -Date expirationDate
    +String getNonce()
    +Date getExpirationDate()
    }

  class BasicConfiguration {
    -String clientId;
    -String authority;
    -String redirectUriSignin;
    -String redirectUriGraph;
    -String secretKey;
    -String msGraphEndpointHost;
    }
  AuthFilter - -> AuthHelper
  AuthFilter - -> SessionManagementHelper
  AuthHelper - -> SessionManagementHelper
  SessionManagementHelper - -> StateData
  AuthHelper .. BasicConfiguration
}

package com.microsoft.aad.msal4j {
  interface IAuthenticationResult {
    ~String accessToken()
    ~String idToken()
    ~IAccount account()
    ~String environment()
    ~String scopes()
    ~Date expiresOnDate()
    }
    
  abstract class AbstractClientApplicationBase {
    +URL getAuthorizationRequestUrl()
    +CompletableFuture<IAuthenticationResult> acquireToken()
    +CompletableFuture<IAuthenticationResult> acquireTokenSilently()
    }
    
  class ConfidentialClientApplication {
    +CompletableFuture<IAuthenticationResult> acquireToken()
    }

  class PublicClientApplication {
    +CompletableFuture<IAuthenticationResult> acquireToken()
    }

  PublicClientApplication -up-|> AbstractClientApplicationBase
  ConfidentialClientApplication -up-|> AbstractClientApplicationBase
}

AuthHelper - -> ConfidentialClientApplication
AuthHelper - -> PublicClientApplication
@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_232-heroku-b09
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>